{% extends '_layout.html' %}

{% block title %}Post{% endblock %}

{% block scripts %}
    <script>
        postID = {{ post.post_id }};
        userID = "{{ user_id }}";
    </script>
    <script src="/static/scripts/loadComments.js" defer></script>
    {% if owner %}
    <script src="/static/scripts/addDeletePostButton.js" defer></script>
    <script src="/static/scripts/editPost.js" defer></script>
    {% endif %}
    <script src="/static/scripts/editComment.js" defer></script>
    <script src="/static/scripts/addDeleteCommentButton.js" defer></script>
    <script src="/static/scripts/commentBox.js" defer></script>
{% endblock %}

{% block stylesheet %}
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/forum.css') }}">
{% endblock %}

{% block body %}
<div class="single-container mt-4">
    <h4 class="single-title">{{ post.title }}</h4>
    <img src="{{ post.image.url }}" class="single-img" alt="Responsive image">
    <p class="single-paragraph">{{ post.text_content }}</p>
    
    {% if owner %}
    <button id="editPostButton" class="btn btn-secondary">Edit Post</button>
    <div id="deleteButtonContainer"></div>
    {% endif %}
    
    <div id="commentsContainer"></div>

    <!-- New comment form -->
    <div id="newCommentForm" class="new-comment-box">
        <textarea id="commentContent" rows="4" placeholder="Write your comment here..." class="form-control"></textarea>
        <button type="button" onclick="postComment()" class="btn btn-primary">Post Comment</button>
    </div>
</div>

{% endblock %}
